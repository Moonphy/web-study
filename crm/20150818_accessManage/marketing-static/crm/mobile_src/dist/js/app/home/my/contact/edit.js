BTR.define(["require","exports","module","../../../base/index","../../../nav/nav","./load-contact-type"],function(e,t,n){var r=e("../../../base/index"),i=r.$,s=e("../../../nav/nav"),o=e("./load-contact-type"),u=new s({prev:{id:"J_prev",text:'<i class="icon iconfont">&#xe61f;</i>详情'},title:"通讯录-修改",op:{id:"J_save",text:"保存"}});u.init(),i(function(){function u(){var e=i("#J_name").val(),t=i("#J_type").val(),s=i("#J_phone").val(),o=i("#J_memo").val();if(r.check.null(e)){r.msg.info("名称不能为空啊，亲");return}if(r.check.null(t)){r.msg.info("联系人类型没选呐，亲");return}if(r.check.null(s)){r.msg.info("电话号码不能为空啊，亲");return}var u={contactID:n,contactMan:e,contactTypeID:t,phoneNo:s,memo:o};return r.utils.toQueryString(u)}var e=i("#J_type"),t=r.data.get("dt_model");i("#J_name").val(t.contactMan),i("#J_phone").val(t.phoneNo),i("#J_memo").val(t.memo);var n=t.contactID,s=t.contactTypeName;o.load(s,e),i("#J_prev").on(r.events.click,function(){history.back()}),i("#J_save").on(r.events.click,function(){var e=u();if(e==undefined)return;i.ajax({url:"/wx/phone/update/userPhone",data:e,type:"POST",success:function(e){r.state.check(e,function(){r.msg.success("信息已更新",3e3,function(){history.back()})})}})}),r.pageLoaded()})});