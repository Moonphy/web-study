define("modules/add-role/0.0.1/index",["common","layer"],function(require,exports,module){function add(params){$.ajax({url:"/auth/add/role",type:"POST",data:params,errorMsg:"抱歉，添加岗位信息失败！",callback:function(data){$.alert("岗位信息添加成功！","s")}})}function loadAllRole(callback){$.ajax({url:"/auth/find/AllRoleNameList",errorMsg:"获取所有岗位列表失败！",callback:function(data){callback.call(this,data)}})}var addRole,common=require("common"),$=common.jquery,layer=require("layer");$("#backBtn").on("click",function(){window.history.back()});var roleCode=$("#roleCode"),roleName=$("#roleName"),state=$("#state"),parentId=($("#roleId"),$("#parentId"));loadAllRole(function(data){for(var tmp="",i=0;i<data.length;i++){var mo=data[i];tmp+='<option value="'+mo.roleId+'">'+mo.roleName+"</option>"}$("#parentId").empty().append(tmp)}),$("#submitBtn").on("click",function(){if($.isEmpty(roleCode.val()))return void layer.tips("请输入岗位编码",roleCode);if($.isEmpty(roleName.val()))return void layer.tips("请输入岗位名称",roleName);if($.isEmpty(parentId.val()))return void layer.tips("请选择上级岗位",parentId);if($.isEmpty(state.val()))return void layer.tips("请选择状态",state);var params={roleCode:roleCode.val(),roleName:roleName.val(),state:state.val(),parentId:parentId.val()};add(params)}),module.exports=addRole});