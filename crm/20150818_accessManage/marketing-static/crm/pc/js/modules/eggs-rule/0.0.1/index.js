define("modules/eggs-rule/0.0.1/index",["common","pagination","layer","tpl","modules/eggs-rule/0.0.1/src/list-tpl"],function(require,exports,module){function getBaseFilterParams(){var t=$(".filter .group input").serialize();return void 0==t?"":t}function goPage(page){$.ajax({url:"/hitEgg/find/list",data:"current="+page+"&size=20&"+getBaseFilterParams(),errorMsg:"抱歉，拉取数据失败！",callback:function(data){pagination.init({target:".pager",total:data.total,eachCount:data.size,currentPage:data.current,callback:goPage}),list.empty(),tpl(listtpl).render(data,function(render){list.append(render.replace(/undefined/g,"").replace(/null/g,""))})}})}var eggsRule,common=require("common"),$=common.jquery,pagination=require("pagination"),layer=require("layer"),tpl=require("tpl"),listtpl=require("modules/eggs-rule/0.0.1/src/list-tpl"),list=$("#list");goPage(0),$(".btn").on("click",function(){var ops=getBaseFilterParams();goPage(0,ops)}),list.on("change","td select",function(){var self=$(this),mfctyName=self.data("name"),oldVal=self.data("old"),id=self.data("id"),newVal=self.val(),text=self.find("option:selected").text();layer.confirm('你确定要更改<span class="warn">【'+mfctyName+'】</span>汽修厂的砸金蛋规则等级为<span class="warn">【'+text+"】</span>吗？",{icon:3,title:"提示",shift:6},function(){$.ajax({url:"/hitEgg/edit/level",type:"POST",data:"orgID="+encodeURIComponent(id)+"&ruleLevel="+encodeURIComponent(newVal),errorMsg:"抱歉，更改失败！",callback:function(){$.alert("已完成更改！","s"),oldVal=newVal},complate:function(){self.val(oldVal),self.data("old",oldVal)}})},function(){self.val(oldVal)})}),module.exports=eggsRule});