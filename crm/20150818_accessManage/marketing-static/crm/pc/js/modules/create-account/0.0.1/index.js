define("modules/create-account/0.0.1/index",["common","layer","loadcity"],function(require,exports,module){var createAccount={},common=require("common"),$=common.jquery,layer=require("layer"),loadcity=require("loadcity");return-1!=location.pathname.indexOf("base/account/find")&&($.isEmpty(params)||$.isEmpty(params.id))?void $.keyNotFound():($(function(){function loadDept(target,id){$.ajax({url:"/base/duty/find",type:"GET",errorMsg:"职位信息加载失败",callback:function(models){if(0!=models.length){var tmp="";$.each(models,function(idx,mode){tmp+=mode.dutyID==id?'<option value="'+mode.dutyID+'" selected="selected">'+mode.dutyName+"</option>":'<option value="'+mode.dutyID+'">'+mode.dutyName+"</option>"}),target.empty().append(tmp)}}})}var dutyId=($("#mp"),$("#email"),$("#mfctyName"),$("#address"),$("#cactMan"),$("#cactTel"),$("#createTime"),$("#dutyId")),province=$("#Province"),city=$("#City"),areaId=$("#areaId"),goList=($("#loginPwd"),$("#reloginPwd"),$("#submitBtn"),$("#goList")),delBtn=$("#delBtn"),resetPwdBtn=$("#resetPwdBtn"),backUrl=($("#backBtn"),"/mobile/account/index.do");form=$("#form");loadDept(dutyId,params.dutyID),loadcity.loadProvince(province,""!=params.provinceID?params.provinceID:void 0),params.provinceID&&params.cityId&&params.areaId&&(loadcity.loadCity(city,params.provinceID,params.cityId),loadcity.loadArea(areaId,params.cityId,params.areaId,null)),province.on("change",function(){var val=province.val();city.find(":not(:first)").remove(),areaId.find(":not(:first)").remove(),val&&loadcity.loadCity(city,val)}),city.on("change",function(){var val=city.val();val&&(areaId.find(":not(:first)").remove(),loadcity.loadArea(areaId,val))}),goList.on("click",function(){window.location.href="/base/account/find/all"}),delBtn.on("click",function(){layer.confirm("你确定删除此账户？",{icon:3,title:"提示"},function(index){$.ajax({url:"/base/account/del",data:"id="+encodeURIComponent(params.id),type:"POST",errorMsg:"抱歉，删除失败！",callback:function(){$.alert("删除成功！","s",function(){layer.close(index),location.href=document.referrer})}})})}),resetPwdBtn.on("click",function(){layer.confirm("你确定重置此账户密码？",{icon:3,title:"提示"},function(index){$.ajax({url:"/base/account/reset",data:"id="+encodeURIComponent(params.id),errorMsg:"抱歉，重置失败！",callback:function(){$.alert("重置完成，初始密码为c123456！","s",function(){layer.close(index),location.href=backUrl})}})})})}),void(module.exports=createAccount))});