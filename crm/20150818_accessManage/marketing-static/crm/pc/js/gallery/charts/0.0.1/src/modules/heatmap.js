define("gallery/charts/0.0.1/src/modules/heatmap",function(t,i,o){o.exports=function(t){var i,o=t.Axis,s=t.Chart,e=t.Color,a=t.Legend,r=t.LegendSymbolMixin,n=t.Series,l=t.getOptions(),h=t.each,p=t.extend,d=t.extendClass,c=t.merge,u=t.pick,g=t.seriesTypes,m=t.wrap,f=function(){},x=t.ColorAxis=function(){this.isColorAxis=!0,this.init.apply(this,arguments)};p(x.prototype,o.prototype),p(x.prototype,{defaultColorAxisOptions:{lineWidth:0,gridLineWidth:1,tickPixelInterval:72,startOnTick:!0,endOnTick:!0,offset:0,marker:{animation:{duration:50},color:"gray",width:.01},labels:{overflow:"justify"},minColor:"#EFEFFF",maxColor:"#003875",tickLength:5},init:function(t,i){var s,e="vertical"!==t.options.legend.layout;s=c(this.defaultColorAxisOptions,{side:e?2:1,reversed:!e},i,{isX:e,opposite:!e,showEmpty:!1,title:null,isColor:!0}),o.prototype.init.call(this,t,s),i.dataClasses&&this.initDataClasses(i),this.initStops(i),this.isXAxis=!0,this.horiz=e,this.zoomEnabled=!1},tweenColors:function(t,i,o){var s,e;return i.rgba.length&&t.rgba.length?(t=t.rgba,i=i.rgba,s=1!==i[3]||1!==t[3],e=(s?"rgba(":"rgb(")+Math.round(i[0]+(t[0]-i[0])*(1-o))+","+Math.round(i[1]+(t[1]-i[1])*(1-o))+","+Math.round(i[2]+(t[2]-i[2])*(1-o))+(s?","+(i[3]+(t[3]-i[3])*(1-o)):"")+")"):e=i.raw||"none",e},initDataClasses:function(t){var i,o=this,s=this.chart,a=0,r=this.options,n=t.dataClasses.length;this.dataClasses=i=[],this.legendItems=[],h(t.dataClasses,function(t,l){var h;t=c(t),i.push(t),t.color||("category"===r.dataClassColor?(h=s.options.colors,t.color=h[a++],a===h.length&&(a=0)):t.color=o.tweenColors(e(r.minColor),e(r.maxColor),2>n?.5:l/(n-1)))})},initStops:function(t){this.stops=t.stops||[[0,this.options.minColor],[1,this.options.maxColor]],h(this.stops,function(t){t.color=e(t[1])})},setOptions:function(t){o.prototype.setOptions.call(this,t),this.options.crosshair=this.options.marker,this.coll="colorAxis"},setAxisSize:function(){var t,i,o,s,e=this.legendSymbol,a=this.chart;e&&(this.left=t=e.attr("x"),this.top=i=e.attr("y"),this.width=o=e.attr("width"),this.height=s=e.attr("height"),this.right=a.chartWidth-t-o,this.bottom=a.chartHeight-i-s,this.len=this.horiz?o:s,this.pos=this.horiz?t:i)},toColor:function(t,o){var s,e,a,r,n,l,h=this.stops,p=this.dataClasses;if(p){for(l=p.length;l--;)if(n=p[l],e=n.from,a=n.to,(e===i||t>=e)&&(a===i||a>=t)){r=n.color,o&&(o.dataClass=l);break}}else{for(this.isLog&&(t=this.val2lin(t)),s=1-(this.max-t)/(this.max-this.min||1),l=h.length;l--&&!(s>h[l][0]););e=h[l]||h[l+1],a=h[l+1]||e,s=1-(a[0]-s)/(a[0]-e[0]||1),r=this.tweenColors(e.color,a.color,s)}return r},getOffset:function(){var t=this.legendGroup,i=this.chart.axisOffset[this.side];t&&(o.prototype.getOffset.call(this),this.axisGroup.parentGroup||(this.axisGroup.add(t),this.gridGroup.add(t),this.labelGroup.add(t),this.added=!0,this.labelLeft=0,this.labelRight=this.width),this.chart.axisOffset[this.side]=i)},setLegendColor:function(){var t,i=this.horiz,o=this.options,s=this.reversed;t=i?[+s,0,+!s,0]:[0,+!s,0,+s],this.legendColor={linearGradient:{x1:t[0],y1:t[1],x2:t[2],y2:t[3]},stops:o.stops||[[0,o.minColor],[1,o.maxColor]]}},drawLegendSymbol:function(t,i){var o,s=t.padding,e=t.options,a=this.horiz,r=u(e.symbolWidth,a?200:12),n=u(e.symbolHeight,a?12:200),l=u(e.labelPadding,a?16:30),h=u(e.itemDistance,10);this.setLegendColor(),i.legendSymbol=this.chart.renderer.rect(0,t.baseline-11,r,n).attr({zIndex:1}).add(i.legendGroup),o=i.legendSymbol.getBBox(),this.legendItemWidth=r+s+(a?h:l),this.legendItemHeight=n+s+(a?l:0)},setState:f,visible:!0,setVisible:f,getSeriesExtremes:function(){var t;this.series.length&&(t=this.series[0],this.dataMin=t.valueMin,this.dataMax=t.valueMax)},drawCrosshair:function(t,i){var s,e=i&&i.plotX,a=i&&i.plotY,r=this.pos,n=this.len;i&&(s=this.toPixels(i[i.series.colorKey]),r>s?s=r-2:s>r+n&&(s=r+n+2),i.plotX=s,i.plotY=this.len-s,o.prototype.drawCrosshair.call(this,t,i),i.plotX=e,i.plotY=a,this.cross&&this.cross.attr({fill:this.crosshair.color}).add(this.legendGroup))},getPlotLinePath:function(t,i,s,e,a){return"number"==typeof a?this.horiz?["M",a-4,this.top-6,"L",a+4,this.top-6,a,this.top,"Z"]:["M",this.left,a,"L",this.left-6,a+6,this.left-6,a-6,"Z"]:o.prototype.getPlotLinePath.call(this,t,i,s,e)},update:function(t,i){h(this.series,function(t){t.isDirtyData=!0}),o.prototype.update.call(this,t,i),this.legendItem&&(this.setLegendColor(),this.chart.legend.colorizeItem(this,!0))},getDataClassLegendSymbols:function(){var o,s=this,e=this.chart,a=this.legendItems,n=e.options.legend,l=n.valueDecimals,d=n.valueSuffix||"";return a.length||h(this.dataClasses,function(n,c){var u=!0,g=n.from,m=n.to;o="",g===i?o="< ":m===i&&(o="> "),g!==i&&(o+=t.numberFormat(g,l)+d),g!==i&&m!==i&&(o+=" - "),m!==i&&(o+=t.numberFormat(m,l)+d),a.push(p({chart:e,name:o,options:{},drawLegendSymbol:r.drawRectangle,visible:!0,setState:f,setVisible:function(){u=this.visible=!u,h(s.series,function(t){h(t.points,function(t){t.dataClass===c&&t.setVisible(u)})}),e.legend.colorizeItem(this,u)}},n))}),a},name:""}),h(["fill","stroke"],function(t){HighchartsAdapter.addAnimSetter(t,function(i){i.elem.attr(t,x.prototype.tweenColors(e(i.start),e(i.end),i.pos))})}),m(s.prototype,"getAxes",function(t){var i=this.options,o=i.colorAxis;t.call(this),this.colorAxis=[],o&&(t=new x(this,o))}),m(a.prototype,"getAllItems",function(t){var i=[],o=this.chart.colorAxis[0];return o&&(o.options.dataClasses?i=i.concat(o.getDataClassLegendSymbols()):i.push(o),h(o.series,function(t){t.options.showInLegend=!1})),i.concat(t.call(this))});var y={pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color",dashstyle:"dashStyle"},pointArrayMap:["value"],axisTypes:["xAxis","yAxis","colorAxis"],optionalAxis:"colorAxis",trackerGroups:["group","markerGroup","dataLabelsGroup"],getSymbol:f,parallelArrays:["x","y","value"],colorKey:"value",translateColors:function(){var t=this,i=this.options.nullColor,o=this.colorAxis,s=this.colorKey;h(this.data,function(e){var a,r=e[s];a=null===r?i:o&&void 0!==r?o.toColor(r,e):e.color||t.color,a&&(e.color=a)})}};return l.plotOptions.heatmap=c(l.plotOptions.scatter,{animation:!1,borderWidth:0,nullColor:"#F8F8F8",dataLabels:{formatter:function(){return this.point.value},inside:!0,verticalAlign:"middle",crop:!1,overflow:!1,padding:0},marker:null,pointRange:null,tooltip:{pointFormat:"{point.x}, {point.y}: {point.value}<br/>"},states:{normal:{animation:!0},hover:{halo:!1,brightness:.2}}}),g.heatmap=d(g.scatter,c(y,{type:"heatmap",pointArrayMap:["y","value"],hasPointSpecificOptions:!0,supportsDrilldown:!0,getExtremesFromAll:!0,init:function(){var t;g.scatter.prototype.init.apply(this,arguments),t=this.options,this.pointRange=t.pointRange=u(t.pointRange,t.colsize||1),this.yAxis.axisPointRange=t.rowsize||1},translate:function(){var t=this,i=t.options,o=t.xAxis,s=t.yAxis;t.generatePoints(),h(t.points,function(t){var e=(i.colsize||1)/2,a=(i.rowsize||1)/2,r=Math.round(o.len-o.translate(t.x-e,0,1,0,1)),n=Math.round(o.len-o.translate(t.x+e,0,1,0,1)),l=Math.round(s.translate(t.y-a,0,1,0,1)),h=Math.round(s.translate(t.y+a,0,1,0,1));t.plotX=t.clientX=(r+n)/2,t.plotY=(l+h)/2,t.shapeType="rect",t.shapeArgs={x:Math.min(r,n),y:Math.min(l,h),width:Math.abs(n-r),height:Math.abs(h-l)}}),t.translateColors(),this.chart.hasRendered&&h(t.points,function(t){t.shapeArgs.fill=t.options.color||t.color})},drawPoints:g.column.prototype.drawPoints,animate:f,getBox:f,drawLegendSymbol:r.drawRectangle,getExtremes:function(){n.prototype.getExtremes.call(this,this.valueData),this.valueMin=this.dataMin,this.valueMax=this.dataMax,n.prototype.getExtremes.call(this)}})),t}});