define("gallery/dialog/0.0.1/index",["jquery"],function(t,e,o){function n(t){if(t.onOk?(t.onok=t.onOk,b=!0):t.onok||(t.style.ok={display:"none"}),t.onCancel?(t.oncancel=t.onCancel,b=!0):t.oncancel||(t.style.cancel={display:"none"}),t.onClose&&(t.onclose=t.onClose,b=!0),t.styleContent&&(t.style.content=t.styleContent,b=!0),t.styleOk&&(t.style.ok=t.styleOk,b=!0),t.styleCancel&&(t.style.cancel=t.styleCancel,b=!0),t.url&&!t.content&&(t.content=t.url,b=!0),t.overlay&&(t.styleOverlay?(t.overlay={opacity:t.styleOverlay.opacity,bgColor:t.styleOverlay.backgroundColor,backgroundColor:t.styleOverlay.backgroundColor},b=!0):"object"!=typeof t.overlay&&(t.overlay={opacity:.2,bgColor:"#000"})),t.closeImg===!1?(t.style.close={display:"none"},b=!0):b&&(t.style.close={display:"block"}),b)switch("none"==t.style.ok.display&&"none"==t.style.cancel.display&&(t.style.bottom={display:"none"}),t.position){case"middle":case"c":case"m":t.position="center";break;case"rb":case"br":case"rightBottom":case"bottomRight":t.position="right-bottom";break;case"rt":case"tr":case"rightTop":case"topRight":t.position="right-top";break;case"lt":case"tl":case"leftTop":case"topLeft":t.position="left-top";break;case"ct":case"tc":case"centerTop":case"topCenter":t.position="center-top"}return t}function i(t){var e=this,o=i;e.closed=!0,e.option=t,e.completed=1,e.panel=o.build(t),e.panel.click(function(o){if(u[t.id])return!1;var n=a(o.target),i=n.attr("name");return/^(close|ok)$/i.test(i)?e[i]():void 0})}function l(t){var e=this,o=l;e.option=t,e.panel=o.build(t)}var a=t("jquery"),r={},d=window.VBArray,s=d&&!window.XMLHttpRequest,c=a(window),p=a(document),u={},h={},g=[],f={skin:"hudong",basePath:"./",zIndex:10100},b=!1;r=function(t){var e,o=i,l=!1,r=a.extend(!0,{},o.defaults,t);r=n(r),e=h[r.id],t.skin||(r.skin=f.skin),e?(delete r.one,e.option=r,l=!0,f.zIndex+=1,e.panel.css({zIndex:f.zIndex}),e.panel.find(".jqd-title").html(r.title)):(e=h[r.id]=new o(r),o.bindEvent(e));var d=e.panel;return d.unbind("click.jqd"),"function"==typeof r.onclick&&d.bind("click.jqd",function(t){return r.onclick(t)}),d.unbind("mouseover.jqd"),"function"==typeof r.onmouseover&&d.bind("mouseover",function(t){return r.onmouseover(t)}),d.unbind("mouseout.jqd"),"function"==typeof r.onmouseout&&d.bind("mouseout.jqd",function(t){return r.onmouseout(t)}),d.removeClass().addClass("jquery-dialog "+r.skin),o.setCss(e),r.draggable&&r.title?(d.addClass("draggable"),d.find(".jqd-title").addClass("dragger")):(d.removeClass("draggable"),d.find(".jqd-title").removeClass("dragger")),(l&&r.content||!l)&&e.setContent(r.content,r.type),e.show(),b?d:e},r=a.extend(r,{config:function(t){f=a.extend(f,t)},setConfig:function(t){f=a.extend(f,t)},close:function(t){var e;return t?h[t]&&(e=h[t].close()):g.length&&(e=g.pop(),e.close()),e},tip:function(t,e){var o="__tip",n={id:o,title:e,content:"",style:{bottom:{display:"none"}}};return"object"==typeof t?n=a.extend(!0,n,t):"string"==typeof t&&(n.title=e,n.content=t),a.dialog.confirm(n)},alert:function(t,e,o){var n="__alert",i={id:n,title:o,content:"",style:{bottom:{display:"block"},ok:{display:"inline-block"},cancel:{display:"none"}}};return"object"==typeof t?i=a.extend(!0,i,t):"string"==typeof t&&(i.title=o,i.content=t),a.dialog.confirm(i,e,o)},confirm:function(t,e,o){o=o||"\u63d0\u793a";var n="__confirm",i={id:n,title:o,content:"",width:340,offsetY:-50,zIndex:20001,overlay:{zIndex:10001,opacity:0},style:{content:{"font-size":"14px",color:"#333"},bottom:{display:"block"},ok:{display:"inline-block"},cancel:{display:"inline-block"}},onok:function(t,o){"function"==typeof e?e(t,o):o.close()},oncancel:function(){r.close()}};return"object"==typeof t?i=a.extend(!0,i,t):"string"==typeof t&&(i.title=o,i.content=t),a.dialog(i)},get:function(t,e){return h[t]?e?h[t]:b?h[t].panel:h[t]:null},addStyle:function(t){a("head").append("<style>"+t+"</style>")}}),i.defaults={id:"default",title:"",type:"html",content:"",align:"left",valign:"center",width:0,height:0,offsetX:0,offsetY:0,position:"center",fixed:!0,draggable:!1,zIndex:0,autoClose:0,model:"default",overlay:{opacity:.7},focusInput:"",one:null,callback:null,onclose:null,oncancel:null,onok:null,onclick:null,onmouseover:null,onmouseout:null,textOk:"\u786e \u5b9a",textCancel:"\u53d6 \u6d88",loading:"loading...",loadErrorInfo:"\u52a0\u8f7d\u5931\u8d25",display:{title:!0,close:!0,bottom:!0,ok:!0,cancel:!0},skin:f.skin,style:{"outter-wrap":"","inner-wrap":"",title:"",content:"",bottom:"",ok:"",cancel:"",close:"",error:"",success:"",status:""}},i=a.extend(i,{init:function(){i.setStyle();var t=[];t.push(".default .jqd-inner-wrap{border:2px solid #148ea4;border-radius:6px;box-shadow:0 0 8px #148ea4;}.default .jqd-title{background-color:#148ea4;border-bottom:1px solid #E5E5E5;color:#FFFFFF;font-weight:bold;}.default .jqd-close{width:18px;height:20px;top:2px;right:5px;}.default .jqd-button button{width:80px;height:27px;cursor: pointer;font-size:12px;line-height:100%;_line-height:26px;}"),t.push(".noborder .jqd-inner-wrap{}.noborder .jqd-title{display:none;}.noborder .jqd-content{padding:0;}.noborder .jqd-close{display:none;}.noborder .jqd-bottom-pad{height:0;}.noborder .jqd-bottom{display:none;}"),t.push(".bluebox .jqd-bg{background:#000; filter:alpha(opacity=30);opacity:0.3; width:100%; height:100% !important; _height:1000px;position:absolute; z-index:-1; zoom:1;}.bluebox .jqd-inner-wrap{}.bluebox .jqd-title{background-color:#009DF0;color:#FFF;font-weight:bold;}.bluebox .jqd-close{top:3px;right:5px;}.bluebox .jqd-button button{width:80px;height:27px;cursor: pointer;font-size:12px;line-height:100%;_line-height:26px;}"),t.push(".greybox .jqd-outter-wrap{}.greybox .jqd-bg{background:#000; filter:alpha(opacity=8);opacity:0.08; width:100%; height:100% !important; _height:1000px;position:absolute; z-index:-1; zoom:1;}.greybox .jqd-inner-wrap{border:1px solid #A5A5A5;border-radius:2px;box-shadow:0;}.greybox .jqd-title{border:0; height:30px;font-size:14px;line-height:30px;color:#87C7DB;background-color:#F3F3F3;}.greybox .jqd-close{width:10px;height:10px;top:10px;right:14px;background:url(http://www.huimg.cn/xiaobaike/images/baike2.0/form.png) -42px -108px;text-indent:2em;}.greybox .jqd-button button{width:80px;height:27px;cursor: pointer;font-size:12px;line-height:100%;_line-height:26px;}"),t.push(".xiaobaike .jqd-outter-wrap{}.xiaobaike .jqd-bg{background:#000; filter:alpha(opacity=8);opacity:0.08; width:100%; height:100% !important; _height:1000px;position:absolute; z-index:-1; zoom:1;}.xiaobaike .jqd-inner-wrap{border:1px solid #A5A5A5;border-radius:2px;box-shadow:0;}.xiaobaike .jqd-title{height:20px;line-height:20px;font-size:18px;color:#87C7DB;padding:11px 0 1px 15px;font-family:\\5FAE\\8F6F\\96C5\\9ED1;}.xiaobaike .jqd-content{padding-top:5px;}.xiaobaike .jqd-close{width:10px;height:10px;top:15px;right:14px;background:url(http://www.huimg.cn/xiaobaike/images/baike2.0/form.png) -42px -108px;text-indent:2em;}.xiaobaike .jqd-button button{width:80px;height:27px;cursor: pointer;font-size:12px;line-height:100%;_line-height:26px;}"),t.push(".hudong .jqd-title, .hudong .jqd-close, .hudong .jqd-button, .hudong .jqd-button button{background:url(http://www.huimg.cn/lib/dialog/bg_minbox.png) no-repeat;}.hudong .jqd-title{background-repeat:repeat-x;height:30px;border-top:1px solid #69B2FC; font-weight:bold; color:#FFF; line-height:30px;}.hudong .jqd-bg{background:#000; filter:alpha(opacity=20);opacity:0.2; width:100%; height:100% !important; _height:1000px;position:absolute; z-index:-1; zoom:1;}.hudong .jqd-content{padding:2px 20px;}.hudong .jqd-bottom{height:25px;padding:5px 0 8px; text-align:center;}.hudong .jqd-close{width:16px;height:16px;top:7px;right:7px; background-position:0 -218px;text-indent:2em;}.hudong .jqd-button{display:inline-block;  margin:0 4px 0 3px; background-position:0 -32px;font-size:12px;}.hudong .jqd-button button{margin:0; cursor:pointer;height:31px; padding:0 14px; *padding:0 4px; border:0 none; background-position:right -63px;font-weight:bold;color:#FFF;line-height:31px;}.hudong .jqd-reg{background-position:0 -94px;}.hudong .jqd-reg button{background-position:right -125px; color:#2375CB;}.hudong .jqd-cancel{background-position:0 -156px;}.hudong .jqd-cancel button{background-position:right -187px; color:#2C2C2C;}"),r.addStyle(t.join("\n\n"))},build:function(t){var e=null,o="dialog-"+t.id,n=a("#"+o);return n.size()||(e=document.createElement("div"),e.id=o,e.innerHTML=i.getHtml(t),document.body.appendChild(e),n=a(e)),n.css({left:0,top:"-2000px",zIndex:t.zIndex||f.zIndex,position:t.fixed&&!s?"fixed":"absolute"}),n},setStyle:function(){var t=".jquery-dialog{position:absolute;z-index:1000;font-size:12px;overflow:hidden;}.jquery-dialog jqd-outter-wrap>table td{padding:0px;}.jqd-outter-wrap{padding:4px;}.jqd-outter-wrap>table{margin:0;}.jqd-bg{border-radius:4px;}.jqd-inner-wrap{position:relative;background-color:#FFF;}.jqd-title{padding:0px 10px;font-size:16px;color:#FFFFFF;cursor:default;height:30px;line-height:30px;}.jqd-close{position:absolute;top:5px;right:20px;font-size:24px;color:#FFFFFF;cursor:pointer;width:18px;height:18px;overflow:hidden;font-weight:bold;font-family: tahoma;line-height:20px;}.jqd-content{padding:0px 10px;}.jqd-text{padding:10px;text-align:left;line-height:20px;font-size:14px;}.jqd-bottom{text-align:right;height:25px;padding-right:20px;}.jqd-bottom-pad{height:8px;}.jqd-cancel {margin-left:10px;}.jqd-status,.jqd-success, .jqd-error{position:absolute;width:200px;bottom:9px;background-color:#F5F5F5;color:#666;line-height:22px;border:1px dashed #CCC;border-radius:5px;left:20px;padding:0 10px;display:none;}.jqd-success{color:green;}.jqd-error{color:red;}";r.addStyle(t)},getHtml:function(t){var e=t,o="";return e.width&&e.height?o+="width:"+e.width+"px; height:"+e.height+"px; overflow:hidden;":e.width?o+="width:"+e.width+"px; overflow-x:hidden;":e.height&&(o+="height:"+e.height+"px; overflow-y:hidden;"),'<div class="jqd-bg"></div><div class="jqd-outter-wrap">	<table border="0" cellspacing="0" cellpadding="0"><tbody><tr><td>	<div class="jqd-inner-wrap">	<div class="jqd-title">'+e.title+'</div><a class="jqd-close" name="close" title="\u5173\u95ed">\xd7</a>	<div class="jqd-content" id="jqd-content-'+e.id+'" style="'+o+'"></div>	<div class="jqd-bottom">	<span class="jqd-ok jqd-button"><button name="ok" type="submit" >'+e.textOk+'</button></span>	<span class="jqd-cancel jqd-button"><button name="close">'+e.textCancel+'</button></span>	</div>	<div class="jqd-bottom-pad"></div>	<div class="jqd-status" id="jqd-status-'+e.id+'"></div>	</div></td></tr></tbody></table></div>'},setCss:function(t){var e,o=t.panel,n=t.option;if(n.style&&"object"==typeof n.style)for(var i in n.style)e=n.style[i],e&&o.find(".jqd-"+i).css(e);return t},bindEvent:function(t){var e=t.option,o=0,n=t.panel;c.bind("resize",function(){t.closed||t.setPosition()}),s&&e.fixed&&c.bind("scroll",function(){clearTimeout(o),o=setTimeout(function(){t.closed||i.scroll(t)},200)}),n.mousedown(function(e){if(a(e.target).is("a"))return!0;var o=t.option;o.zIndex||r.self==t||(f.zIndex+=2,n.css({zIndex:f.zIndex}),r.self=t)})},scroll:function(t){var e=t.option,o=p.scrollTop(),n=c.height(),i=t.panel.outerHeight();n>i&&(/^c(enter)?$/i.test(e.position)?o+=(n-i)/2:"right-bottom"===e.position&&(o+=n-i),t.panel.animate({top:o},200))},getPostion:function(t){var e=t.panel,o=t.option,n=c.width(),i=c.height(),l=e.outerWidth(),a=e.outerHeight(),r={},d=p.scrollTop();return/^c(enter)?/i.test(o.position)?(r.left="50%",r.marginLeft=-l/2,"center-top"===o.position?r.top=0:"center-bottom"===o.position?r.top=i-a-2:r.top=(i-a)/2):("right-bottom"===o.position?(r.left=n-l-2,r.top=i-a-2):"right-top"===o.position?(r.left=n-l-2,r.top=2):"left-top"===o.position&&(r.left=2,r.top=2),r.left+=o.offsetX,r.left=r.left<0?0:r.left),(!o.fixed||s)&&(r.top+=d),r.top+=o.offsetY,o.fixed?s?r.top=r.top<d?d:r.top:(r.top=r.top<0?0:r.top,r.position="fixed"):r.top=r.top<d?d:r.top,r},resetFocus:function(t){var e=t.panel,o=t.option,n="start"==o.focusInput?!0:!1;if(o.focusInput&&/(start|end)/i.test(o.focusInput)){var i=e.find(":text,textarea").filter(":visible").eq(0);i.focus();var l=i[0];if(l.createTextRange){var a=l.createTextRange();a.select(),a.collapse(n),a.select()}else l.setSelectionRange&&(n?l.setSelectionRange(0,0):l.setSelectionRange(l.value.length,l.value.length))}}}),i.prototype={setPosition:function(){var t=this,e=t.panel,o=i.getPostion(t);e.css(o)},show:function(){var t=this,e=t.panel,o=t.option;if(!t.closed)return t;t.closed=!1,e.css(i.getPostion(t)),o.overlay&&(o.overlay.id=o.id,t.overlay=y(o.overlay));for(var n=g.length,l=0;n>l;l++)if(t==g[l]){delete g[l];break}if(g.push(t),o.model.indexOf("alone")>-1)for(var l=0,n=g.length;n>l;l++){var a=g[l];a&&t!=a&&a.option.model.indexOf("together")<0&&a.close()}return t.completed&&"iframe"!==o.type&&setTimeout(function(){t.execCallback()},0),t},setContent:function(t,e){e=e||"html";var o,n=this,i="",l=n.option,r="jqd-content-"+l.id;if(n.completed=1,"object"==typeof t)return a("#"+r).empty().append(t),n;switch(e){case"ajax":case"img":o=t,t=l.loading,n.completed=0;break;case"iframe":o=t,t="<iframe id='"+r+"_iframe' name='"+r+"_iframe' border='0' width='"+l.width+"' height='"+l.height+"' frameborder='no'  marginwidth='0' marginheight='0' scrolling='no' allowtransparency='yes'></iframe>"}if("selector"==e?(i=a(t).html()||a(t).data("htmltpl"),a(t).empty(),a(t).data("htmltpl",i)):i=t,i&&/<\/(div|table|dl|ul|ol|iframe)>/i.test(i)||(i='<table border="0" cellspacing="0" cellpadding="0" width="'+l.width+'" height="'+l.height+'"><tbody><tr><td class="jqd-text" style="text-align:'+l.align+"; vertical-align:"+l.valign+'">'+i+"</td></tr></tbody></table>"),a("#"+r).html(i),"img"===e){var d=new Image;d.onload=function(){if(!n.closed){n.completed=1;var t=d.width>950?950:d.width;n.setContent('<img src="'+o+'" width="'+t+'" />'),n.setPosition()}},d.onerror=function(){n.setContent(l.loadErrorInfo)},d.src=o}else if("ajax"===e)a.ajax({url:o,type:"GET",dataType:"html",cache:!1,success:function(t,e){n.closed||(n.completed=1,n.setContent(t),n.setPosition())},complete:function(t,e){n.closed||"success"!=e&&n.setContent(l.loadErrorInfo)}});else if("iframe"===e){var s=a("#"+r+"_iframe"),c=0;s.load(function(){clearTimeout(c),n.execCallback()}),s.attr("src",o),c=setTimeout(function(){n.execCallback()},1e4)}else"html"===e&&n.completed&&(n.resetHeight(),"ajax"===l.type?setTimeout(function(){n.execCallback(i)},0):"img"===l.type&&setTimeout(function(){n.execCallback()},0));return n},resetHeight:function(){var t=this,e=t.option,o=t.panel;if(e.fixed&&"noborder"!=e.skin){var n=c.height(),i=o.find(".jqd-content");i.css({height:""}),o.height()>n?i.css({height:n-100,width:i.width(),display:"block",overflowX:"hidden",overflowY:"scroll"}):i.css({display:"block",overflowX:"visible",overflowY:"visible"}),t.setPosition()}},execCallback:function(t){var e=this,o=e.panel,n=e.option;e.completed&&("function"==typeof n.one&&(n.one(o,e),delete n.one),i.resetFocus(e),"function"==typeof n.callback&&n.callback(o,e,t),n.autoClose&&(n.autoClose=parseInt(n.autoClose,10),n.autoClose=isNaN(n.autoClose)?3e3:n.autoClose,e.autoCloseTimeoutId&&clearTimeout(e.autoCloseTimeoutId),e.autoCloseTimeoutId=setTimeout(function(){e.close()},n.autoClose)))},hide:function(){var t=this,e=g.length;t.closed=!0,t.panel.css({top:"-2000px"}),t.option.overlay&&t.overlay.close();for(var o=0;e>o;o++)if(t==g[o]){delete g[o];break}return t},close:function(){var t=this,e=t.option;return t.hide(),t.clear(),"function"==typeof e.onclose&&e.onclose(t.panel,t),t},ok:function(){var t=this,e=t.option;return"function"==typeof e.onok?e.onok(t.panel,t):t.close(),t},status:function(t,e){var o=this,n=o.option;return o.clear(),e=e||"status",a("#jqd-status-"+n.id).removeClass().addClass("jqd-"+e).html(t).show(),o},notice:function(t){return this.status(t)},success:function(t){return this.status(t,"success")},error:function(t){return this.status(t,"error")},clear:function(){var t=this,e=t.option.id;return clearTimeout(t.statusTimeId),a("#jqd-status-"+e).hide(),t},autoClear:function(t){t=parseInt(t,10),isNaN(t)&&(t=3e3);var e=this;return clearTimeout(e.statusTimeId),e.statusTimeId=setTimeout(function(){e.clear()},t),e},lock:function(){return u[this.option.id]=1,this},unlock:function(){return u[this.option.id]=0,this}},setTimeout(function(){i.init()},0);var x={},c=a(window),p=a(document),d=window.VBArray,s=d&&!window.XMLHttpRequest,y=function(t){var e,o=l;return t=a.extend({},o.defaults,t),e=x[t.id],e||(e=x[t.id]=new o(t)),e.show(),e.bindEvent(),e};l.defaults={id:"default",bgColor:"#000",opacity:.1,zIndex:1e4},l.build=function(t){var e=document.createElement("div"),o="everlay-"+t.id;e.id=o,e.className="overlay",s&&(e.innerHTML='<iframe style="width:100%;height:100%;visibility:inherit;" frameborder="0"></iframe>');var n=a(e);return n.css({position:"fixed",display:"none",zIndex:t.zIndex,left:0,top:0,width:"100%",height:"100%"}),e.style.backgroundColor=t.bgColor,"function"==typeof t.onclick&&n.click(function(){t.onclick(a(this))}),document.body.appendChild(e),a("#"+o)},l.prototype={show:function(){var t=this,e=t.panel,o=t.option;return t.resize(),s?e.show().css({opacity:o.opacity,position:"absolute"}):(e.css({opacity:0,display:"block"}),e.animate({opacity:o.opacity},200)),t},close:function(){var t=this,e=t.panel;return s?e.hide():e.animate({opacity:0},200,function(){e.hide()}),t},resize:function(){var t=this,e=t.panel,o=c.width();if(e.css("width",o),s&&(e.css({top:p.scrollTop(),height:c.height()}),"relative"==a("body").css("position"))){var n=parseInt((o-a("body").width())/2,10);n>0&&e.css("marginLeft",-n)}},bindEvent:function(){var t=this,e=t.panel;c.bind("resize",function(){t.resize()}),s&&c.bind("scroll",function(){e.css({top:p.scrollTop()})})}},o.exports=r});