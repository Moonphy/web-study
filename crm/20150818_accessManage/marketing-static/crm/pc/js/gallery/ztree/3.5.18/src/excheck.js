define("gallery/ztree/3.5.18/src/excheck",function(e,t,c){var a=function(e,t){var c={event:{CHECK:"ztree_check"},id:{CHECK:"_check"},checkbox:{STYLE:"checkbox",DEFAULT:"chk",DISABLED:"disable",FALSE:"false",TRUE:"true",FULL:"full",PART:"part",FOCUS:"focus"},radio:{STYLE:"radio",TYPE_ALL:"all",TYPE_LEVEL:"level"}},a={check:{enable:!1,autoCheckTrigger:!1,chkStyle:c.checkbox.STYLE,nocheckInherit:!1,chkDisabledInherit:!1,radioType:c.radio.TYPE_LEVEL,chkboxType:{Y:"ps",N:"ps"}},data:{key:{checked:"checked"}},callback:{beforeCheck:null,onCheck:null}},h=function(e){var t=N.getRoot(e);t.radioCheckedList=[]},i=function(e){},n=function(e){var t=e.treeObj,c=S.event;t.bind(c.CHECK,function(t,c,a,h){t.srcEvent=c,v.apply(e.callback.onCheck,[t,a,h])})},k=function(e){var t=e.treeObj,c=S.event;t.unbind(c.CHECK)},r=function(e){var t=e.target,c=N.getSetting(e.data.treeId),a="",h=null,i="",n="",k=null,r=null;if(v.eqs(e.type,"mouseover")?c.check.enable&&v.eqs(t.tagName,"span")&&null!==t.getAttribute("treeNode"+S.id.CHECK)&&(a=v.getNodeMainDom(t).id,i="mouseoverCheck"):v.eqs(e.type,"mouseout")?c.check.enable&&v.eqs(t.tagName,"span")&&null!==t.getAttribute("treeNode"+S.id.CHECK)&&(a=v.getNodeMainDom(t).id,i="mouseoutCheck"):v.eqs(e.type,"click")&&c.check.enable&&v.eqs(t.tagName,"span")&&null!==t.getAttribute("treeNode"+S.id.CHECK)&&(a=v.getNodeMainDom(t).id,i="checkNode"),a.length>0)switch(h=N.getNodeCache(c,a),i){case"checkNode":k=g.onCheckNode;break;case"mouseoverCheck":k=g.onMouseoverCheck;break;case"mouseoutCheck":k=g.onMouseoutCheck}var d={stop:"checkNode"===i,node:h,nodeEventType:i,nodeEventCallback:k,treeEventType:n,treeEventCallback:r};return d},d=function(e,t,c,a,h,i,n){if(c){var k=e.data.key.checked;if("string"==typeof c[k]&&(c[k]=v.eqs(c[k],"true")),c[k]=!!c[k],c.checkedOld=c[k],"string"==typeof c.nocheck&&(c.nocheck=v.eqs(c.nocheck,"true")),c.nocheck=!!c.nocheck||e.check.nocheckInherit&&a&&!!a.nocheck,"string"==typeof c.chkDisabled&&(c.chkDisabled=v.eqs(c.chkDisabled,"true")),c.chkDisabled=!!c.chkDisabled||e.check.chkDisabledInherit&&a&&!!a.chkDisabled,"string"==typeof c.halfCheck&&(c.halfCheck=v.eqs(c.halfCheck,"true")),c.halfCheck=!!c.halfCheck,c.check_Child_State=-1,c.check_Focus=!1,c.getCheckStatus=function(){return N.getCheckStatus(e,c)},e.check.chkStyle==S.radio.STYLE&&e.check.radioType==S.radio.TYPE_ALL&&c[k]){var r=N.getRoot(e);r.radioCheckedList.push(c)}}},s=function(e,t,c){e.data.key.checked;e.check.enable&&(N.makeChkFlag(e,t),c.push("<span ID='",t.tId,S.id.CHECK,"' class='",y.makeChkClass(e,t),"' treeNode",S.id.CHECK,t.nocheck===!0?" style='display:none;'":"","></span>"))},o=function(e,t){t.checkNode=function(e,t,c,a){var h=this.setting.data.key.checked;if(e.chkDisabled!==!0&&(t!==!0&&t!==!1&&(t=!e[h]),a=!!a,(e[h]!==t||c)&&(!a||0!=v.apply(this.setting.callback.beforeCheck,[this.setting.treeId,e],!0))&&v.uCanDo(this.setting)&&this.setting.check.enable&&e.nocheck!==!0)){e[h]=t;var i=E(e,S.id.CHECK,this.setting);(c||this.setting.check.chkStyle===S.radio.STYLE)&&y.checkNodeRelation(this.setting,e),y.setChkClass(this.setting,i,e),y.repairParentChkClassWithSelf(this.setting,e),a&&this.setting.treeObj.trigger(S.event.CHECK,[null,this.setting.treeId,e])}},t.checkAllNodes=function(e){y.repairAllChk(this.setting,!!e)},t.getCheckedNodes=function(e){var t=this.setting.data.key.children;return e=e!==!1,N.getTreeCheckedNodes(this.setting,N.getRoot(this.setting)[t],e)},t.getChangeCheckedNodes=function(){var e=this.setting.data.key.children;return N.getTreeChangeCheckedNodes(this.setting,N.getRoot(this.setting)[e])},t.setChkDisabled=function(e,t,c,a){t=!!t,c=!!c,a=!!a,y.repairSonChkDisabled(this.setting,e,t,a),y.repairParentChkDisabled(this.setting,e.getParentNode(),t,c)};var c=t.updateNode;t.updateNode=function(e,a){if(c&&c.apply(t,arguments),e&&this.setting.check.enable){var h=E(e,this.setting);if(h.get(0)&&v.uCanDo(this.setting)){var i=E(e,S.id.CHECK,this.setting);(1==a||this.setting.check.chkStyle===S.radio.STYLE)&&y.checkNodeRelation(this.setting,e),y.setChkClass(this.setting,i,e),y.repairParentChkClassWithSelf(this.setting,e)}}}},l={getRadioCheckedList:function(e){for(var t=N.getRoot(e).radioCheckedList,c=0,a=t.length;a>c;c++)N.getNodeCache(e,t[c].tId)||(t.splice(c,1),c--,a--);return t},getCheckStatus:function(e,t){if(!e.check.enable||t.nocheck||t.chkDisabled)return null;var c=e.data.key.checked,a={checked:t[c],half:t.halfCheck?t.halfCheck:e.check.chkStyle==S.radio.STYLE?2===t.check_Child_State:t[c]?t.check_Child_State>-1&&t.check_Child_State<2:t.check_Child_State>0};return a},getTreeCheckedNodes:function(e,t,c,a){if(!t)return[];var h=e.data.key.children,i=e.data.key.checked,n=c&&e.check.chkStyle==S.radio.STYLE&&e.check.radioType==S.radio.TYPE_ALL;a=a?a:[];for(var k=0,r=t.length;r>k&&(t[k].nocheck===!0||t[k].chkDisabled===!0||t[k][i]!=c||(a.push(t[k]),!n))&&(N.getTreeCheckedNodes(e,t[k][h],c,a),!(n&&a.length>0));k++);return a},getTreeChangeCheckedNodes:function(e,t,c){if(!t)return[];var a=e.data.key.children,h=e.data.key.checked;c=c?c:[];for(var i=0,n=t.length;n>i;i++)t[i].nocheck!==!0&&t[i].chkDisabled!==!0&&t[i][h]!=t[i].checkedOld&&c.push(t[i]),N.getTreeChangeCheckedNodes(e,t[i][a],c);return c},makeChkFlag:function(e,t){if(t){var c=e.data.key.children,a=e.data.key.checked,h=-1;if(t[c])for(var i=0,n=t[c].length;n>i;i++){var k=t[c][i],r=-1;if(e.check.chkStyle==S.radio.STYLE){if(r=k.nocheck===!0||k.chkDisabled===!0?k.check_Child_State:k.halfCheck===!0?2:k[a]?2:k.check_Child_State>0?2:0,2==r){h=2;break}0==r&&(h=0)}else if(e.check.chkStyle==S.checkbox.STYLE){if(r=k.nocheck===!0||k.chkDisabled===!0?k.check_Child_State:k.halfCheck===!0?1:k[a]?-1===k.check_Child_State||2===k.check_Child_State?2:1:k.check_Child_State>0?1:0,1===r){h=1;break}if(2===r&&h>-1&&i>0&&r!==h){h=1;break}if(2===h&&r>-1&&2>r){h=1;break}r>-1&&(h=r)}}t.check_Child_State=h}}},C={},g={onCheckNode:function(e,t){if(t.chkDisabled===!0)return!1;var c=N.getSetting(e.data.treeId),a=c.data.key.checked;if(0==v.apply(c.callback.beforeCheck,[c.treeId,t],!0))return!0;t[a]=!t[a],y.checkNodeRelation(c,t);var h=E(t,S.id.CHECK,c);return y.setChkClass(c,h,t),y.repairParentChkClassWithSelf(c,t),c.treeObj.trigger(S.event.CHECK,[e,c.treeId,t]),!0},onMouseoverCheck:function(e,t){if(t.chkDisabled===!0)return!1;var c=N.getSetting(e.data.treeId),a=E(t,S.id.CHECK,c);return t.check_Focus=!0,y.setChkClass(c,a,t),!0},onMouseoutCheck:function(e,t){if(t.chkDisabled===!0)return!1;var c=N.getSetting(e.data.treeId),a=E(t,S.id.CHECK,c);return t.check_Focus=!1,y.setChkClass(c,a,t),!0}},f={},u={checkNodeRelation:function(e,t){var c,a,h,i=e.data.key.children,n=e.data.key.checked,k=S.radio;if(e.check.chkStyle==k.STYLE){var r=N.getRadioCheckedList(e);if(t[n])if(e.check.radioType==k.TYPE_ALL){for(a=r.length-1;a>=0;a--)c=r[a],c[n]&&c!=t&&(c[n]=!1,r.splice(a,1),y.setChkClass(e,E(c,S.id.CHECK,e),c),c.parentTId!=t.parentTId&&y.repairParentChkClassWithSelf(e,c));r.push(t)}else{var d=t.parentTId?t.getParentNode():N.getRoot(e);for(a=0,h=d[i].length;h>a;a++)c=d[i][a],c[n]&&c!=t&&(c[n]=!1,y.setChkClass(e,E(c,S.id.CHECK,e),c))}else if(e.check.radioType==k.TYPE_ALL)for(a=0,h=r.length;h>a;a++)if(t==r[a]){r.splice(a,1);break}}else t[n]&&(!t[i]||0==t[i].length||e.check.chkboxType.Y.indexOf("s")>-1)&&y.setSonNodeCheckBox(e,t,!0),t[n]||t[i]&&0!=t[i].length&&!(e.check.chkboxType.N.indexOf("s")>-1)||y.setSonNodeCheckBox(e,t,!1),t[n]&&e.check.chkboxType.Y.indexOf("p")>-1&&y.setParentNodeCheckBox(e,t,!0),!t[n]&&e.check.chkboxType.N.indexOf("p")>-1&&y.setParentNodeCheckBox(e,t,!1)},makeChkClass:function(e,t){var c=e.data.key.checked,a=S.checkbox,h=S.radio,i="";i=t.chkDisabled===!0?a.DISABLED:t.halfCheck?a.PART:e.check.chkStyle==h.STYLE?t.check_Child_State<1?a.FULL:a.PART:t[c]?2===t.check_Child_State||-1===t.check_Child_State?a.FULL:a.PART:t.check_Child_State<1?a.FULL:a.PART;var n=e.check.chkStyle+"_"+(t[c]?a.TRUE:a.FALSE)+"_"+i;return n=t.check_Focus&&t.chkDisabled!==!0?n+"_"+a.FOCUS:n,S.className.BUTTON+" "+a.DEFAULT+" "+n},repairAllChk:function(e,t){if(e.check.enable&&e.check.chkStyle===S.checkbox.STYLE)for(var c=e.data.key.checked,a=e.data.key.children,h=N.getRoot(e),i=0,n=h[a].length;n>i;i++){var k=h[a][i];k.nocheck!==!0&&k.chkDisabled!==!0&&(k[c]=t),y.setSonNodeCheckBox(e,k,t)}},repairChkClass:function(e,t){if(t&&(N.makeChkFlag(e,t),t.nocheck!==!0)){var c=E(t,S.id.CHECK,e);y.setChkClass(e,c,t)}},repairParentChkClass:function(e,t){if(t&&t.parentTId){var c=t.getParentNode();y.repairChkClass(e,c),y.repairParentChkClass(e,c)}},repairParentChkClassWithSelf:function(e,t){if(t){var c=e.data.key.children;t[c]&&t[c].length>0?y.repairParentChkClass(e,t[c][0]):y.repairParentChkClass(e,t)}},repairSonChkDisabled:function(e,t,c,a){if(t){var h=e.data.key.children;if(t.chkDisabled!=c&&(t.chkDisabled=c),y.repairChkClass(e,t),t[h]&&a)for(var i=0,n=t[h].length;n>i;i++){var k=t[h][i];y.repairSonChkDisabled(e,k,c,a)}}},repairParentChkDisabled:function(e,t,c,a){t&&(t.chkDisabled!=c&&a&&(t.chkDisabled=c),y.repairChkClass(e,t),y.repairParentChkDisabled(e,t.getParentNode(),c,a))},setChkClass:function(e,t,c){t&&(c.nocheck===!0?t.hide():t.show(),t.attr("class",y.makeChkClass(e,c)))},setParentNodeCheckBox:function(e,t,c,a){var h=e.data.key.children,i=e.data.key.checked,n=E(t,S.id.CHECK,e);if(a||(a=t),N.makeChkFlag(e,t),t.nocheck!==!0&&t.chkDisabled!==!0&&(t[i]=c,y.setChkClass(e,n,t),e.check.autoCheckTrigger&&t!=a&&e.treeObj.trigger(S.event.CHECK,[null,e.treeId,t])),t.parentTId){var k=!0;if(!c)for(var r=t.getParentNode()[h],d=0,s=r.length;s>d;d++)if(r[d].nocheck!==!0&&r[d].chkDisabled!==!0&&r[d][i]||(r[d].nocheck===!0||r[d].chkDisabled===!0)&&r[d].check_Child_State>0){k=!1;break}k&&y.setParentNodeCheckBox(e,t.getParentNode(),c,a)}},setSonNodeCheckBox:function(e,t,c,a){if(t){var h=e.data.key.children,i=e.data.key.checked,n=E(t,S.id.CHECK,e);a||(a=t);var k=!1;if(t[h])for(var r=0,d=t[h].length;d>r&&t.chkDisabled!==!0;r++){var s=t[h][r];y.setSonNodeCheckBox(e,s,c,a),s.chkDisabled===!0&&(k=!0)}t!=N.getRoot(e)&&t.chkDisabled!==!0&&(k&&t.nocheck!==!0&&N.makeChkFlag(e,t),t.nocheck!==!0&&t.chkDisabled!==!0?(t[i]=c,k||(t.check_Child_State=t[h]&&t[h].length>0?c?2:0:-1)):t.check_Child_State=-1,y.setChkClass(e,n,t),e.check.autoCheckTrigger&&t!=a&&t.nocheck!==!0&&t.chkDisabled!==!0&&e.treeObj.trigger(S.event.CHECK,[null,e.treeId,t]))}}},p={tools:f,view:u,event:C,data:l};e.extend(!0,t.consts,c),e.extend(!0,t._z,p);var b=t,v=b._z.tools,S=b.consts,y=b._z.view,N=b._z.data,E=(b._z.event,v.$);N.exSetting(a),N.addInitBind(n),N.addInitUnBind(k),N.addInitCache(i),N.addInitNode(d),N.addInitProxy(r,!0),N.addInitRoot(h),N.addBeforeA(s),N.addZTreeTools(o);var T=y.createNodes;y.createNodes=function(e,t,c,a){T&&T.apply(y,arguments),c&&y.repairParentChkClassWithSelf(e,a)};var _=y.removeNode;y.removeNode=function(e,t){var c=t.getParentNode();_&&_.apply(y,arguments),t&&c&&(y.repairChkClass(e,c),y.repairParentChkClass(e,c))};var D=y.appendNodes;y.appendNodes=function(e,t,c,a,h,i){var n="";return D&&(n=D.apply(y,arguments)),a&&N.makeChkFlag(e,a),n}};c.exports={init:a}});