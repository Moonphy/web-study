define("gallery/ztree/3.5.18/src/exhide",function(e,i,d){var t=function(e,i){var d=function(e,i,d,t,o,s,n){"string"==typeof d.isHidden&&(d.isHidden=N.eqs(d.isHidden,"true")),d.isHidden=!!d.isHidden,l.initHideForExCheck(e,d)},t=function(e,i,d){},o=function(e,i){i.showNodes=function(i,d){h.showNodes(e,i,d)},i.showNode=function(i,d){i&&h.showNodes(e,[i],d)},i.hideNodes=function(i,d){h.hideNodes(e,i,d)},i.hideNode=function(i,d){i&&h.hideNodes(e,[i],d)};var d=i.checkNode;d&&(i.checkNode=function(e,t,o,s){e&&e.isHidden||d.apply(i,arguments)})},s={initHideForExCheck:function(e,i){i.isHidden&&e.check&&e.check.enable&&("undefined"==typeof i._nocheck&&(i._nocheck=!!i.nocheck,i.nocheck=!0),i.check_Child_State=-1,h.repairParentChkClassWithSelf&&h.repairParentChkClassWithSelf(e,i))},initShowForExCheck:function(e,i){if(!i.isHidden&&e.check&&e.check.enable){if("undefined"!=typeof i._nocheck&&(i.nocheck=i._nocheck,delete i._nocheck),h.setChkClass){var d=f(i,c.id.CHECK,e);h.setChkClass(e,d,i)}h.repairParentChkClassWithSelf&&h.repairParentChkClassWithSelf(e,i)}}},n={clearOldFirstNode:function(e,i){for(var d=i.getNextNode();d;){if(d.isFirstNode){d.isFirstNode=!1,h.setNodeLineIcos(e,d);break}if(d.isLastNode)break;d=d.getNextNode()}},clearOldLastNode:function(e,i,d){for(var t=i.getPreNode();t;){if(t.isLastNode){t.isLastNode=!1,d&&h.setNodeLineIcos(e,t);break}if(t.isFirstNode)break;t=t.getPreNode()}},makeDOMNodeMainBefore:function(e,i,d){e.push("<li ",d.isHidden?"style='display:none;' ":"","id='",d.tId,"' class='",c.className.LEVEL,d.level,"' tabindex='0' hidefocus='true' treenode>")},showNode:function(e,i,d){i.isHidden=!1,l.initShowForExCheck(e,i),f(i,e).show()},showNodes:function(e,i,d){if(i&&0!=i.length){var t,o,s={};for(t=0,o=i.length;o>t;t++){var n=i[t];if(!s[n.parentTId]){var r=n.getParentNode();s[n.parentTId]=null===r?l.getRoot(e):n.getParentNode()}h.showNode(e,n,d)}for(var a in s){var N=s[a][e.data.key.children];h.setFirstNodeForShow(e,N),h.setLastNodeForShow(e,N)}}},hideNode:function(e,i,d){i.isHidden=!0,i.isFirstNode=!1,i.isLastNode=!1,l.initHideForExCheck(e,i),h.cancelPreSelectedNode(e,i),f(i,e).hide()},hideNodes:function(e,i,d){if(i&&0!=i.length){var t,o,s={};for(t=0,o=i.length;o>t;t++){var n=i[t];if((n.isFirstNode||n.isLastNode)&&!s[n.parentTId]){var r=n.getParentNode();s[n.parentTId]=null===r?l.getRoot(e):n.getParentNode()}h.hideNode(e,n,d)}for(var a in s){var N=s[a][e.data.key.children];h.setFirstNodeForHide(e,N),h.setLastNodeForHide(e,N)}}},setFirstNode:function(e,i){var d=e.data.key.children,t=i[d].length;t>0&&!i[d][0].isHidden?i[d][0].isFirstNode=!0:t>0&&h.setFirstNodeForHide(e,i[d])},setLastNode:function(e,i){var d=e.data.key.children,t=i[d].length;t>0&&!i[d][0].isHidden?i[d][t-1].isLastNode=!0:t>0&&h.setLastNodeForHide(e,i[d])},setFirstNodeForHide:function(e,i){var d,t,o;for(t=0,o=i.length;o>t&&(d=i[t],!d.isFirstNode);t++){if(!d.isHidden&&!d.isFirstNode){d.isFirstNode=!0,h.setNodeLineIcos(e,d);break}d=null}return d},setFirstNodeForShow:function(e,i){var d,t,o,s,n;for(t=0,o=i.length;o>t;t++){if(d=i[t],!s&&!d.isHidden&&d.isFirstNode){s=d;break}if(s||d.isHidden||d.isFirstNode){if(s&&d.isFirstNode){d.isFirstNode=!1,n=d,h.setNodeLineIcos(e,d);break}d=null}else d.isFirstNode=!0,s=d,h.setNodeLineIcos(e,d)}return{"new":s,old:n}},setLastNodeForHide:function(e,i){var d,t;for(t=i.length-1;t>=0&&(d=i[t],!d.isLastNode);t--){if(!d.isHidden&&!d.isLastNode){d.isLastNode=!0,h.setNodeLineIcos(e,d);break}d=null}return d},setLastNodeForShow:function(e,i){var d,t,o,s;for(t=i.length-1;t>=0;t--){if(d=i[t],!o&&!d.isHidden&&d.isLastNode){o=d;break}if(o||d.isHidden||d.isLastNode){if(o&&d.isLastNode){d.isLastNode=!1,s=d,h.setNodeLineIcos(e,d);break}d=null}else d.isLastNode=!0,o=d,h.setNodeLineIcos(e,d)}return{"new":o,old:s}}},r={view:n,data:s};e.extend(!0,i._z,r);var a=i,N=a._z.tools,c=a.consts,h=a._z.view,l=a._z.data,f=(a._z.event,N.$);l.addInitNode(d),l.addBeforeA(t),l.addZTreeTools(o);var u=l.initNode;l.initNode=function(e,i,d,t,o,s,n){var r=t?t:l.getRoot(e),a=r[e.data.key.children];l.tmpHideFirstNode=h.setFirstNodeForHide(e,a),l.tmpHideLastNode=h.setLastNodeForHide(e,a),n&&(h.setNodeLineIcos(e,l.tmpHideFirstNode),h.setNodeLineIcos(e,l.tmpHideLastNode)),o=l.tmpHideFirstNode===d,s=l.tmpHideLastNode===d,u&&u.apply(l,arguments),n&&s&&h.clearOldLastNode(e,d,n)};var k=l.makeChkFlag;k&&(l.makeChkFlag=function(e,i){i&&i.isHidden||k.apply(l,arguments)});var F=l.getTreeCheckedNodes;F&&(l.getTreeCheckedNodes=function(e,i,d,t){if(i&&i.length>0){var o=i[0].getParentNode();if(o&&o.isHidden)return[]}return F.apply(l,arguments)});var g=l.getTreeChangeCheckedNodes;g&&(l.getTreeChangeCheckedNodes=function(e,i,d){if(i&&i.length>0){var t=i[0].getParentNode();if(t&&t.isHidden)return[]}return g.apply(l,arguments)});var H=h.expandCollapseSonNode;H&&(h.expandCollapseSonNode=function(e,i,d,t,o){i&&i.isHidden||H.apply(h,arguments)});var p=h.setSonNodeCheckBox;p&&(h.setSonNodeCheckBox=function(e,i,d,t){i&&i.isHidden||p.apply(h,arguments)});var L=h.repairParentChkClassWithSelf;L&&(h.repairParentChkClassWithSelf=function(e,i){i&&i.isHidden||L.apply(h,arguments)})};d.exports={init:t}});