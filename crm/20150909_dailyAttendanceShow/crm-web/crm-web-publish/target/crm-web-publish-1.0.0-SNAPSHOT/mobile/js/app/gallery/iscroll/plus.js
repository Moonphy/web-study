BTR.define(["require","exports","module","./main","zepto"],function(e,t,n){var r=e("./main"),i=e("zepto");n.exports={newVerScrollForPull:function(e,t,n,r,s){var o;typeof e=="string"?o=i(e):typeof e=="object"&&(o=e);var u=s&&s.pulldownRefresh?s.pulldownRefresh:"下拉刷新...",a=s&&s.pullupLoadingMore?s.pullupLoadingMore:"上拉加载更多...",f=s&&s.releaseToRefresh?s.releaseToRefresh:"松手开始刷新...",l=s&&s.releaseToLoading?s.releaseToLoading:"松手开始加载...",c=s&&s.loading?s.loading:"加载中...",h=o.find("#pulldown"),p=o.find("#pullup"),d=0,v=0;h.length>0&&(v=h.height(),h.find("#pulldown-label").html(u)),p.length>0&&(d=p.height(),p.find("#pullup-label").html(a));var m={topOffset:v};i.extend(!0,m,r);var g=this.newVerScroll(o,e,m);return g.on("refresh",function(){var e=o.find("#pulldown"),t=o.find("#pullup");e.length>0&&e.hasClass("loading")?(e.removeClass(),e.find("#pulldown-label").html(u)):t.length>0&&(t.find("#pullup-icon").show(),t.hasClass("loading")&&(t.find("#pullup-icon").show(),t.removeClass(),t.find("#pullup-label").html(a)))}),g.on("scrollMove",function(){var e=o.find("#pulldown"),t=o.find("#pullup");e.length>0&&this.y>5&&!e.hasClass("flip")?(e.removeClass().addClass("flip"),e.find("#pulldown-label").html(f),this.minScrollY=0):e.length>0&&this.y<5&&e.hasClass("flip")?(e.removeClass(),e.find("#pulldown-label").html(u),this.minScrollY=-v):t.length>0&&this.y<this.minScrollY&&this.y<this.maxScrollY-5&&!t.hasClass("flip")?(t.removeClass().addClass("flip"),t.find("#pullup-label").html(l),this.maxScrollY=this.maxScrollY):t.length>0&&this.y>this.maxScrollY+5&&t.hasClass("flip")&&(t.removeClass(),t.find("#pullup-label").html(a),this.maxScrollY=d)}),g.on("scrollEnd",function(){var e=o.find("#pulldown"),r=o.find("#pullup");e.length>0&&e.hasClass("flip")?(e.removeClass().addClass("loading"),e.find("#pulldown-label").html(c),typeof t=="function"&&t.call(g)):r.length>0&&r.hasClass("flip")&&(r.removeClass().addClass("loading"),r.find("#pullup-label").html(c),typeof n=="function"&&r.parent().length>0&&n.call(g))}),g},newVerScroll:function(e,t,n){var s={scrollbars:!0,useTransition:!1};n&&i.extend(s,n);var o=new r(t,s);return o.on("scrollEnd",function(){this.indicator1&&(this.indicator1.indicatorStyle["transition-duration"]="350ms",this.indicator1.indicatorStyle.opacity="0")}),o.on("scrollMove",function(){this.indicator1&&(this.indicator1.indicatorStyle["transition-duration"]="0ms",this.indicator1.indicatorStyle.opacity="0.8")}),o}}});