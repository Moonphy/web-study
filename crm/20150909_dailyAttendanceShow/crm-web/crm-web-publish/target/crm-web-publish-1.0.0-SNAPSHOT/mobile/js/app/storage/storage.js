BTR.define(["require","exports","module"],function(e,t,n){function v(){var e=[],t=!0,n;for(var s in c){if(!c.hasOwnProperty(s))continue;t=!1,n=c[s]||"",e.push(f(s)+u+f(n))}r.name=t?h:i+f(h)+o+e.join(a)}function m(e,t,n){if(!e)return;e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,function(t){n.call(e,t)})}var r=window,i="storage:",s=/^([^=]+)(?:=(.*))?$/,o="?",u="=",a="&",f=encodeURIComponent,l=decodeURIComponent,c={},h,p={},d={};(function(t){if(t&&t.indexOf(i)===0){var n=t.split(/[:?]/);n.shift(),h=l(n.shift())||"";var r=n.join(""),o=r.split(a);for(var u=0,f,p,d,v=o.length;u<v;u++){f=o[u].match(s);if(!f||!f[1])continue;p=l(f[1]),d=l(f[2])||"",c[p]=d}}else h=t||""})(r.name),d.setItem=function(e,t){if(!e||"undefined"==typeof t)return;c[e]=String(t),v()},d.getItem=function(e){return c.hasOwnProperty(e)?c[e]:null},d.removeItem=function(e){if(!c.hasOwnProperty(e))return;c[e]=null,delete c[e],v()},d.clear=function(){c={},v()},d.valueOf=function(){return c},d.toString=function(){var e=r.name;return e.indexOf(i)===0?e:i+e},m(r,"beforeunload",function(){v()}),r.storage=d,n.exports=d});