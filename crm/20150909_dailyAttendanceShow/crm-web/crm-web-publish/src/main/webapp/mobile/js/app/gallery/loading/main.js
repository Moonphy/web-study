BTR.define(["require","exports","module","zepto","../mask/main","text!./load.tpl","css!./style.css"],function(e,t,n){var r=e("zepto"),i=e("../mask/main"),s=r(window),o=function(e){this.settings=r.extend({},o.defaults,e),this.init()};o.defaults={content:"加载中...",zIndex:9999,clock:!0},o.prototype={init:function(){this.render(),this.position(),this.resize(),this.show()},position:function(){var e=this,t=s.width(),n=s.height(),r=s.scrollTop();this.loading.css({left:(t-e.loading.width())/2,top:(n-e.loading.height())/2+r})},resize:function(){var e=this;s.on("resize",function(){e.position()})},render:function(){var t=e("text!./load.tpl");e("css!./style.css");var n=document.getElementsByTagName("body"),i=document.createElement("div");i.style.zIndex=this.settings.zIndex++,this.loading=r(i),this.loading.addClass("ui-loading"),this.loading.html(t),this.loading.prependTo("body")},show:function(){this.settings.clock&&(this.mask?this.mask.show():this.mask=i()),this.loading.show()},close:function(){this.settings.clock&&this.mask.close(),this.loading.hide()},destory:function(){this.settings.clock&&this.mask.destory(),this.loading.remove()}};var u=function(e){return new o(e)};return u});