BTR.define(["require","exports","module","../../base/index","../../nav/nav","../../gallery/iscroll/api","../../gallery/iscroll/list-api","../../gallery/template/main","text!./area-list-item.tpl"],function(e,t,n){var r=e("../../base/index"),i=r.$,s=e("../../nav/nav"),o=e("../../gallery/iscroll/api"),u=e("../../gallery/iscroll/list-api"),a=e("../../gallery/template/main"),f=new s({prev:{text:'<a href="index.html"><i class="icon iconfont">&#xe61f;</i>统计</a>'},title:"地区业绩",op:{text:'<a href="search.html">搜索</a>'}});f.init(),i(function(){function s(){return n.template||(n.template=e("text!./area-list-item.tpl")),n.template}var t=i("#J_result_list"),n={},f=new u({loadDataContainer:t,container:"#J_result_list",url:"/wx/orderStatistics/find/statisticsGroupCity",buildParam:function(){var e="";if(document.referrer.indexOf("search.html")!=-1){var t=r.data.get("query_params_obj");t.provinceID&&(e+="&provinceID="+t.provinceID),t.cityID&&(e+="&cityID="+t.cityID),t.areaID&&(e+="&areaID="+t.areaID),t.date&&(e+="&selectDate="+t.date)}else r.data.set("query_params_obj",undefined);return"?size="+f.size+"&current="+f.current+e},success:function(e){return r.state.check(e,function(e){e.model||(e.model=[]);var t=a.compile(s());f.appendData(t(e)),i("#wrapper").off(r.events.click,"#scroller li.item").on(r.events.click,"#scroller li.item",function(e){location.href=i(this).attr("data-href")}),r.pageLoaded()}),e.model},search:!1,loadedCallback:function(){console.log("数据加载完了"),l.scroll&&l.scroll.refresh(),r.pageLoaded()},canDel:!1}),l=new o({id:"#wrapper",pulldownAction:function(){f.refresh()},pullupAction:function(){var e=this;f.loadNext(function(){e.refresh()})}});l.initialize(),f.initialize(),t.on(r.events.over,"li.item",function(){i(this).css({background:"#ddd"})}).on(r.events.out,"li.item",function(){i(this).css({background:"#fff"})})})});